{"id":"../node_modules/@antv/l7-layers/es/plugins/MultiPassRendererPlugin.js","dependencies":[{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\package.json","includedInParent":true,"mtime":1638980225037},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\package.json","includedInParent":true,"mtime":1638979319357},{"name":"@babel/runtime/helpers/initializerDefineProperty","loc":{"line":1,"column":39},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\initializerDefineProperty.js"},{"name":"@babel/runtime/helpers/classCallCheck","loc":{"line":2,"column":28},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\classCallCheck.js"},{"name":"@babel/runtime/helpers/createClass","loc":{"line":3,"column":25},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\createClass.js"},{"name":"@babel/runtime/helpers/defineProperty","loc":{"line":4,"column":28},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\defineProperty.js"},{"name":"@babel/runtime/helpers/applyDecoratedDescriptor","loc":{"line":5,"column":38},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\applyDecoratedDescriptor.js"},{"name":"@babel/runtime/helpers/initializerWarningHelper","loc":{"line":6,"column":38},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\initializerWarningHelper.js"},{"name":"@antv/l7-core","loc":{"line":10,"column":22},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-core\\es\\index.js"},{"name":"inversify","loc":{"line":11,"column":35},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\inversify\\lib\\inversify.js"},{"name":"reflect-metadata","loc":{"line":12,"column":7},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\MultiPassRendererPlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\reflect-metadata\\Reflect.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.normalizePasses = normalizePasses;\n\nvar _initializerDefineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerDefineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _applyDecoratedDescriptor2 = _interopRequireDefault(require(\"@babel/runtime/helpers/applyDecoratedDescriptor\"));\n\nvar _initializerWarningHelper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerWarningHelper\"));\n\nvar _l7Core = require(\"@antv/l7-core\");\n\nvar _inversify = require(\"inversify\");\n\nrequire(\"reflect-metadata\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dec, _dec2, _class, _class2, _descriptor;\n\nfunction normalizePasses(passes) {\n  return passes.map(function (pass) {\n    if (typeof pass === 'string') {\n      pass = [pass, {}];\n    }\n\n    return pass;\n  });\n}\n\nvar MultiPassRendererPlugin = (_dec = (0, _inversify.injectable)(), _dec2 = (0, _inversify.inject)(_l7Core.TYPES.IGlobalConfigService), _dec(_class = (_class2 = function () {\n  function MultiPassRendererPlugin() {\n    (0, _classCallCheck2.default)(this, MultiPassRendererPlugin);\n    (0, _initializerDefineProperty2.default)(this, \"configService\", _descriptor, this);\n    (0, _defineProperty2.default)(this, \"enabled\", void 0);\n  }\n\n  (0, _createClass2.default)(MultiPassRendererPlugin, [{\n    key: \"apply\",\n    value: function apply(layer, _ref) {\n      var _this = this;\n\n      var rendererService = _ref.rendererService,\n          postProcessingPassFactory = _ref.postProcessingPassFactory,\n          normalPassFactory = _ref.normalPassFactory;\n      layer.hooks.init.tap('MultiPassRendererPlugin', function () {\n        var _layer$getLayerConfig = layer.getLayerConfig(),\n            enableMultiPassRenderer = _layer$getLayerConfig.enableMultiPassRenderer,\n            _layer$getLayerConfig2 = _layer$getLayerConfig.passes,\n            passes = _layer$getLayerConfig2 === void 0 ? [] : _layer$getLayerConfig2;\n\n        _this.enabled = !!enableMultiPassRenderer && layer.getLayerConfig().enableMultiPassRenderer !== false;\n\n        if (_this.enabled) {\n          layer.multiPassRenderer = _this.createMultiPassRenderer(layer, passes, postProcessingPassFactory, normalPassFactory);\n          layer.multiPassRenderer.setRenderFlag(true);\n        }\n      });\n      layer.hooks.beforeRender.tap('MultiPassRendererPlugin', function () {});\n    }\n  }, {\n    key: \"createMultiPassRenderer\",\n    value: function createMultiPassRenderer(layer, passes, postProcessingPassFactory, normalPassFactory) {\n      var multiPassRenderer = layer.multiPassRenderer;\n\n      var _layer$getLayerConfig3 = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig3.enablePicking,\n          enableTAA = _layer$getLayerConfig3.enableTAA;\n\n      if (enablePicking) {\n        multiPassRenderer.add(normalPassFactory('pixelPicking'));\n      }\n\n      return multiPassRenderer;\n    }\n  }]);\n  return MultiPassRendererPlugin;\n}(), _descriptor = (0, _applyDecoratedDescriptor2.default)(_class2.prototype, \"configService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _class2)) || _class);\nexports.default = MultiPassRendererPlugin;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":21,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":23,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":25,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":16,"column":7},"generated":{"line":31,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalizePasses","original":{"line":16,"column":16},"generated":{"line":31,"column":9}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":16,"column":7},"generated":{"line":31,"column":24}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":17,"column":2},"generated":{"line":31,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":16,"column":7},"generated":{"line":31,"column":31}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":31,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":32,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":19,"column":9},"generated":{"line":32,"column":9}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":32,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"map","original":{"line":19,"column":16},"generated":{"line":32,"column":16}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":19,"column":9},"generated":{"line":32,"column":19}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":20},"generated":{"line":32,"column":20}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":19,"column":21},"generated":{"line":32,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":20},"generated":{"line":32,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":77},"generated":{"line":32,"column":36}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":33,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":33,"column":8}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":20,"column":15},"generated":{"line":33,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":33,"column":19}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":24},"generated":{"line":33,"column":24}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":33,"column":32}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":20,"column":34},"generated":{"line":33,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":21,"column":6},"generated":{"line":34,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":21,"column":6},"generated":{"line":34,"column":6}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":34,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":34,"column":13}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":21,"column":14},"generated":{"line":34,"column":14}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":34,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":34,"column":20}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":21,"column":13},"generated":{"line":34,"column":22}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":21,"column":6},"generated":{"line":34,"column":23}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":22,"column":5},"generated":{"line":35,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":37,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"pass","original":{"line":23,"column":11},"generated":{"line":37,"column":11}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":37,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":9},"generated":{"line":38,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":19,"column":9},"generated":{"line":38,"column":3}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":38,"column":4}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":25,"column":1},"generated":{"line":39,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"MultiPassRendererPlugin","original":{"line":41,"column":21},"generated":{"line":41,"column":4}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"injectable","original":{"line":40,"column":1},"generated":{"line":41,"column":38}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"inject","original":{"line":42,"column":3},"generated":{"line":41,"column":76}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"TYPES","original":{"line":42,"column":10},"generated":{"line":41,"column":99}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"IGlobalConfigService","original":{"line":42,"column":16},"generated":{"line":41,"column":113}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"inject","original":{"line":42,"column":3},"generated":{"line":41,"column":133}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":11}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":20}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":48,"column":4},"generated":{"line":50,"column":26}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":31}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":50,"column":37}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":50,"column":39}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":51,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":51,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":51,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":51,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":51,"column":22}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":53,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"rendererService","original":{"line":50,"column":6},"generated":{"line":53,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":53,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":53,"column":28}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":53,"column":32}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"rendererService","original":{"line":50,"column":6},"generated":{"line":53,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":53,"column":48}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":54,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"postProcessingPassFactory","original":{"line":51,"column":6},"generated":{"line":54,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":54,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":54,"column":38}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":54,"column":42}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"postProcessingPassFactory","original":{"line":51,"column":6},"generated":{"line":54,"column":43}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":54,"column":68}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":55,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalPassFactory","original":{"line":52,"column":6},"generated":{"line":55,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":55,"column":27}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":55,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":55,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalPassFactory","original":{"line":52,"column":6},"generated":{"line":55,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":55,"column":52}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":6}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":59,"column":9},"generated":{"line":56,"column":11}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"hooks","original":{"line":59,"column":10},"generated":{"line":56,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":17}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"init","original":{"line":59,"column":16},"generated":{"line":56,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":22}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"tap","original":{"line":59,"column":21},"generated":{"line":56,"column":23}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":26}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":56,"column":27}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":56,"column":52}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":59,"column":52},"generated":{"line":56,"column":54}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":59,"column":58},"generated":{"line":56,"column":66}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":57,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":57,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":57,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":60,"column":55},"generated":{"line":57,"column":36}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":60},"generated":{"line":57,"column":41}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"getLayerConfig","original":{"line":60,"column":61},"generated":{"line":57,"column":42}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":60,"column":55},"generated":{"line":57,"column":56}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":57,"column":58}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":58,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableMultiPassRenderer","original":{"line":60,"column":14},"generated":{"line":58,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":58,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":58,"column":38}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":58,"column":59}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableMultiPassRenderer","original":{"line":60,"column":14},"generated":{"line":58,"column":60}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":58,"column":83}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":37}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":58}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":60,"column":39},"generated":{"line":59,"column":59}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":59,"column":65}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":60,"column":39},"generated":{"line":60,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":21}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":43}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":48}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":53}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":54}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":48},"generated":{"line":60,"column":57}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":59}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":62}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":60,"column":84}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":62,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":62,"column":8}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":62,"column":13}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enabled","original":{"line":63,"column":11},"generated":{"line":62,"column":14}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":62,"column":21}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":62,"column":24}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":64,"column":9},"generated":{"line":62,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableMultiPassRenderer","original":{"line":64,"column":10},"generated":{"line":62,"column":26}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":62,"column":49}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":65,"column":8},"generated":{"line":62,"column":53}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":65,"column":13},"generated":{"line":62,"column":58}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"getLayerConfig","original":{"line":65,"column":14},"generated":{"line":62,"column":59}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":65,"column":8},"generated":{"line":62,"column":73}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableMultiPassRenderer","original":{"line":65,"column":31},"generated":{"line":62,"column":76}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":65,"column":8},"generated":{"line":62,"column":99}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":65,"column":59},"generated":{"line":62,"column":104}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":63,"column":6},"generated":{"line":62,"column":109}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":64,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":68,"column":10},"generated":{"line":64,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":68,"column":14},"generated":{"line":64,"column":17}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enabled","original":{"line":68,"column":15},"generated":{"line":64,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":64,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":68,"column":24},"generated":{"line":64,"column":27}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":69,"column":8},"generated":{"line":65,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":69,"column":8},"generated":{"line":65,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":13},"generated":{"line":65,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":69,"column":14},"generated":{"line":65,"column":16}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":69,"column":8},"generated":{"line":65,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":36}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":38},"generated":{"line":65,"column":41}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"createMultiPassRenderer","original":{"line":69,"column":39},"generated":{"line":65,"column":42}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":65}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":70,"column":10},"generated":{"line":65,"column":66}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":71}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":71,"column":10},"generated":{"line":65,"column":73}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":79}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"postProcessingPassFactory","original":{"line":72,"column":10},"generated":{"line":65,"column":81}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":106}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalPassFactory","original":{"line":73,"column":10},"generated":{"line":65,"column":108}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":65,"column":125}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":69,"column":8},"generated":{"line":65,"column":126}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":75,"column":8},"generated":{"line":66,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":75,"column":8},"generated":{"line":66,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":75,"column":13},"generated":{"line":66,"column":15}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":75,"column":14},"generated":{"line":66,"column":16}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":75,"column":8},"generated":{"line":66,"column":33}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"setRenderFlag","original":{"line":75,"column":32},"generated":{"line":66,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":75,"column":8},"generated":{"line":66,"column":47}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":75,"column":46},"generated":{"line":66,"column":48}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":75,"column":8},"generated":{"line":66,"column":52}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":76,"column":7},"generated":{"line":67,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":68,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":59,"column":4},"generated":{"line":68,"column":7}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":6}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":79,"column":9},"generated":{"line":69,"column":11}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"hooks","original":{"line":79,"column":10},"generated":{"line":69,"column":12}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":17}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"beforeRender","original":{"line":79,"column":16},"generated":{"line":69,"column":18}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"tap","original":{"line":79,"column":29},"generated":{"line":69,"column":31}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":34}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":79,"column":33},"generated":{"line":69,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":60}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":79,"column":60},"generated":{"line":69,"column":62}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":79,"column":66},"generated":{"line":69,"column":74}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":79,"column":4},"generated":{"line":69,"column":75}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":79,"column":4},"generated":{"line":69,"column":76}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":86,"column":3},"generated":{"line":70,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":11}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":20}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":43}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":93,"column":4},"generated":{"line":73,"column":44}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":49}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"passes","original":{"line":94,"column":4},"generated":{"line":73,"column":51}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":57}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"postProcessingPassFactory","original":{"line":95,"column":4},"generated":{"line":73,"column":59}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":84}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalPassFactory","original":{"line":96,"column":4},"generated":{"line":73,"column":86}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":73,"column":103}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":73,"column":105}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":98,"column":4},"generated":{"line":74,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":98,"column":10},"generated":{"line":74,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":98,"column":27},"generated":{"line":74,"column":27}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":98,"column":30},"generated":{"line":74,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":98,"column":35},"generated":{"line":74,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":98,"column":36},"generated":{"line":74,"column":36}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":98,"column":4},"generated":{"line":74,"column":53}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":76,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":76,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":76,"column":32}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":99,"column":41},"generated":{"line":76,"column":35}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":46},"generated":{"line":76,"column":40}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"getLayerConfig","original":{"line":99,"column":47},"generated":{"line":76,"column":41}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"layer","original":{"line":99,"column":41},"generated":{"line":76,"column":55}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":76,"column":57}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":77,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enablePicking","original":{"line":99,"column":12},"generated":{"line":77,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":77,"column":23}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":77,"column":26}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":77,"column":48}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enablePicking","original":{"line":99,"column":12},"generated":{"line":77,"column":49}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":77,"column":62}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":78,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableTAA","original":{"line":99,"column":27},"generated":{"line":78,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":78,"column":19}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":78,"column":22}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":78,"column":44}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enableTAA","original":{"line":99,"column":27},"generated":{"line":78,"column":45}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":78,"column":54}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":102,"column":4},"generated":{"line":80,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"enablePicking","original":{"line":102,"column":8},"generated":{"line":80,"column":10}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":102,"column":4},"generated":{"line":80,"column":23}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":102,"column":23},"generated":{"line":80,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":103,"column":6},"generated":{"line":81,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":103,"column":6},"generated":{"line":81,"column":8}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":103,"column":23},"generated":{"line":81,"column":25}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"add","original":{"line":103,"column":24},"generated":{"line":81,"column":26}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":103,"column":6},"generated":{"line":81,"column":29}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"normalPassFactory","original":{"line":103,"column":28},"generated":{"line":81,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":103,"column":45},"generated":{"line":81,"column":47}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":103,"column":46},"generated":{"line":81,"column":48}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":103,"column":45},"generated":{"line":81,"column":62}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":103,"column":6},"generated":{"line":81,"column":63}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":104,"column":5},"generated":{"line":82,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":128,"column":4},"generated":{"line":84,"column":0}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":"multiPassRenderer","original":{"line":128,"column":11},"generated":{"line":84,"column":13}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":128,"column":4},"generated":{"line":84,"column":30}},{"source":"../../src/plugins/MultiPassRendererPlugin.ts","name":null,"original":{"line":129,"column":3},"generated":{"line":85,"column":0}}],"sources":{"../../src/plugins/MultiPassRendererPlugin.ts":"import {\n  IGlobalConfigService,\n  ILayer,\n  ILayerPlugin,\n  IPass,\n  IPostProcessingPass,\n  IRendererService,\n  TYPES,\n} from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\n\n/**\n * 'blurH' -> ['blurH', {}]\n */\nexport function normalizePasses(\n  passes: Array<string | [string, { [key: string]: unknown }]>,\n) {\n  return passes.map((pass: string | [string, { [key: string]: unknown }]) => {\n    if (typeof pass === 'string') {\n      pass = [pass, {}];\n    }\n    return pass;\n  });\n}\n\n/**\n * 自定义渲染管线：\n * ClearPass -> PixelPickingPass(可选) -> RenderPass/TAAPass -> PostProcessing -> CopyPass\n * 根据 Layer 配置的 passes 创建 PostProcessing\n * @example\n * new PolygonLayer({\n *   enableMultiPassRenderer: true,\n *   passes: [\n *     'blurH',\n *     ['blurV', { radius: 10 }],\n *   ],\n * })\n */\n@injectable()\nexport default class MultiPassRendererPlugin implements ILayerPlugin {\n  @inject(TYPES.IGlobalConfigService)\n  private readonly configService: IGlobalConfigService;\n\n  private enabled: boolean;\n\n  public apply(\n    layer: ILayer,\n    {\n      rendererService,\n      postProcessingPassFactory,\n      normalPassFactory,\n    }: {\n      rendererService: IRendererService;\n      postProcessingPassFactory: (name: string) => IPostProcessingPass<unknown>;\n      normalPassFactory: (name: string) => IPass<unknown>;\n    },\n  ) {\n    layer.hooks.init.tap('MultiPassRendererPlugin', () => {\n      const { enableMultiPassRenderer, passes = [] } = layer.getLayerConfig();\n\n      // SceneConfig 的 enableMultiPassRenderer 配置项可以统一关闭\n      this.enabled =\n        !!enableMultiPassRenderer &&\n        layer.getLayerConfig().enableMultiPassRenderer !== false;\n\n      // 根据 LayerConfig passes 配置项初始化\n      if (this.enabled) {\n        layer.multiPassRenderer = this.createMultiPassRenderer(\n          layer,\n          passes,\n          postProcessingPassFactory,\n          normalPassFactory,\n        );\n        layer.multiPassRenderer.setRenderFlag(true);\n      }\n    });\n\n    layer.hooks.beforeRender.tap('MultiPassRendererPlugin', () => {\n      // if (this.enabled) {\n      //   // 渲染前根据 viewport 调整 FBO size\n      //   const { width, height } = rendererService.getViewportSize();\n      //   layer.multiPassRenderer.resize(width, height);\n      // }\n    });\n  }\n\n  /**\n   * 默认添加 ClearPass、RenderPass\n   * 以及 PostProcessing 中的最后一个 CopyPass\n   */\n  private createMultiPassRenderer(\n    layer: ILayer,\n    passes: Array<string | [string, { [key: string]: unknown }]>,\n    postProcessingPassFactory: (name: string) => IPostProcessingPass<unknown>,\n    normalPassFactory: (name: string) => IPass<unknown>,\n  ) {\n    const multiPassRenderer = layer.multiPassRenderer;\n    const { enablePicking, enableTAA } = layer.getLayerConfig();\n\n    // picking pass if enabled\n    if (enablePicking) {\n      multiPassRenderer.add(normalPassFactory('pixelPicking'));\n    }\n\n    // use TAA pass if enabled instead of render pass\n    // if (enableTAA) {\n    //   multiPassRenderer.add(normalPassFactory('taa'));\n    // } else {\n    //   // render all layers in this pass\n    //   multiPassRenderer.add(normalPassFactory('render'));\n    // }\n\n    // post processing\n    // normalizePasses(passes).forEach(\n    //   (pass: [string, { [key: string]: unknown }]) => {\n    //     const [passName, initializationOptions] = pass;\n    //     multiPassRenderer.add(\n    //       postProcessingPassFactory(passName),\n    //       initializationOptions,\n    //     );\n    //   },\n    // );\n\n    // 末尾为固定的 CopyPass\n    // multiPassRenderer.add(postProcessingPassFactory('copy'));\n\n    return multiPassRenderer;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"cf6542260ca5aea307293de9c3529234","cacheData":{"env":{}}}