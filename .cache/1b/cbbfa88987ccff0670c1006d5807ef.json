{"id":"../node_modules/@antv/l7-core/es/services/layer/IStyleAttributeService.js","dependencies":[{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-core\\es\\services\\layer\\IStyleAttributeService.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\package.json","includedInParent":true,"mtime":1638980225037},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-core\\package.json","includedInParent":true,"mtime":1638979319341}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StyleScaleType = exports.ScaleTypes = exports.AttributeType = void 0;\nvar ScaleTypes;\nexports.ScaleTypes = ScaleTypes;\n\n(function (ScaleTypes) {\n  ScaleTypes[\"LINEAR\"] = \"linear\";\n  ScaleTypes[\"POWER\"] = \"power\";\n  ScaleTypes[\"LOG\"] = \"log\";\n  ScaleTypes[\"IDENTITY\"] = \"identity\";\n  ScaleTypes[\"TIME\"] = \"time\";\n  ScaleTypes[\"QUANTILE\"] = \"quantile\";\n  ScaleTypes[\"QUANTIZE\"] = \"quantize\";\n  ScaleTypes[\"THRESHOLD\"] = \"threshold\";\n  ScaleTypes[\"CAT\"] = \"cat\";\n})(ScaleTypes || (exports.ScaleTypes = ScaleTypes = {}));\n\nvar StyleScaleType;\nexports.StyleScaleType = StyleScaleType;\n\n(function (StyleScaleType) {\n  StyleScaleType[\"CONSTANT\"] = \"constant\";\n  StyleScaleType[\"VARIABLE\"] = \"variable\";\n})(StyleScaleType || (exports.StyleScaleType = StyleScaleType = {}));\n\nvar AttributeType;\nexports.AttributeType = AttributeType;\n\n(function (AttributeType) {\n  AttributeType[AttributeType[\"Attribute\"] = 0] = \"Attribute\";\n  AttributeType[AttributeType[\"InstancedAttribute\"] = 1] = \"InstancedAttribute\";\n  AttributeType[AttributeType[\"Uniform\"] = 2] = \"Uniform\";\n})(AttributeType || (exports.AttributeType = AttributeType = {}));"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":7,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":7,"column":4}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":7,"column":14}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":10,"column":11}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":11,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":11,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":11,"column":22}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":11,"column":33}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":12,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":12,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":12,"column":21}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":12,"column":31}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":13,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":13,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":13,"column":19}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":13,"column":27}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":14,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":14,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":14,"column":24}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":14,"column":37}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":15,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":15,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":15,"column":20}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":15,"column":29}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":16,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":16,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":16,"column":24}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":16,"column":37}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":17,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":17,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":17,"column":24}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":17,"column":37}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":18,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":18,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":18,"column":25}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":18,"column":39}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":19,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":19,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":19,"column":19}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":19,"column":27}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":20,"column":3}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"ScaleTypes","original":{"line":17,"column":12},"generated":{"line":20,"column":39}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":22,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":22,"column":4}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":22,"column":18}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":25,"column":11}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":26,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":26,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":26,"column":28}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":26,"column":41}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":27,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":27,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":27,"column":28}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":27,"column":41}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":28,"column":3}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"StyleScaleType","original":{"line":49,"column":12},"generated":{"line":28,"column":47}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":71,"column":0},"generated":{"line":30,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":30,"column":4}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":null,"original":{"line":71,"column":0},"generated":{"line":30,"column":17}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":33,"column":11}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":16}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":42}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":47}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":34,"column":61}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":16}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":51}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":56}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":35,"column":79}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":0}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":2}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":16}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":40}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":45}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":36,"column":57}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":37,"column":3}},{"source":"../../../src/services/layer/IStyleAttributeService.ts","name":"AttributeType","original":{"line":71,"column":12},"generated":{"line":37,"column":45}}],"sources":{"../../../src/services/layer/IStyleAttributeService.ts":"import {\n  IAttribute,\n  IAttributeInitializationOptions,\n} from '../renderer/IAttribute';\nimport { IBufferInitializationOptions } from '../renderer/IBuffer';\nimport { IElements } from '../renderer/IElements';\nimport { IParseDataItem, IParserData } from '../source/ISourceService';\nimport { ILayer } from './ILayerService';\n\n/**\n * 1. 提供各个 Layer 样式属性初始值的注册服务\n * 2. 当 Layer 通过 style() 改变某些样式属性时，需要感知并标记该属性已经失效，\n *    随后当 Layer 重绘时通过 dirty 标记进行脏检查。重新传入 uniform 或者构建顶点数据（更新 Buffer 中的指定位置）。\n * @see https://yuque.antfin-inc.com/yuqi.pyq/fgetpa/qfuzg8\n */\n\nexport enum ScaleTypes {\n  LINEAR = 'linear',\n  POWER = 'power',\n  LOG = 'log',\n  IDENTITY = 'identity',\n  TIME = 'time',\n  QUANTILE = 'quantile',\n  QUANTIZE = 'quantize',\n  THRESHOLD = 'threshold',\n  CAT = 'cat',\n}\nexport type ScaleTypeName =\n  | 'linear'\n  | 'power'\n  | 'log'\n  | 'identity'\n  | 'time'\n  | 'quantile'\n  | 'quantize'\n  | 'threshold'\n  | 'cat';\n\nexport type ScaleAttributeType = 'color' | 'size' | 'shape';\nexport interface IScale {\n  type: ScaleTypeName;\n  field?: string;\n  ticks?: any[];\n  nice?: boolean;\n  format?: () => any;\n  domain?: any[];\n}\n\nexport enum StyleScaleType {\n  CONSTANT = 'constant',\n  VARIABLE = 'variable',\n}\nexport interface IScaleOption {\n  field?: string;\n  attr?: ScaleAttributeType;\n  type: ScaleTypeName;\n  ticks?: any[];\n  nice?: boolean;\n  format?: () => any;\n  domain?: any[];\n}\nexport interface IScaleOptions {\n  [key: string]: IScale | undefined;\n}\nexport interface IStyleScale {\n  scale: any;\n  field: string | number;\n  type: StyleScaleType;\n  option: IScaleOption | undefined;\n}\nexport enum AttributeType {\n  Attribute,\n  InstancedAttribute,\n  Uniform,\n}\n\nexport interface IAnimateOption {\n  enable: boolean;\n  interval?: number;\n  duration?: number;\n  trailLength?: number;\n  repeat?: number;\n  speed?: number;\n  rings?: number;\n}\n\nexport interface IEncodeFeature {\n  color?: Color;\n  size?: number | number[];\n  shape?: string | number;\n  pattern?: string;\n  id?: number;\n  coordinates: Position | Position[] | Position[][];\n  [key: string]: any;\n}\n\nexport interface IVertexAttributeDescriptor\n  extends Omit<IAttributeInitializationOptions, 'buffer'> {\n  /**\n   * attribute name in vertex shader\n   */\n  name: string;\n  /**\n   * 创建 buffer 的参数\n   */\n  buffer: IBufferInitializationOptions;\n  update?: (\n    feature: IEncodeFeature,\n    featureIdx: number,\n    vertex: number[],\n    attributeIdx: number,\n    normal: number[],\n  ) => number[];\n}\n\ntype Position = number[];\ntype Color = [number, number, number, number];\ntype CallBack = (...args: any[]) => any;\nexport type StyleAttributeField = string | string[] | number[];\nexport type StyleAttributeOption = string | number | boolean | any[] | CallBack;\nexport type StyleAttrField = string | string[] | number | number[];\nexport interface IAttributeScale {\n  field: string | number;\n  func: unknown;\n  option: IScaleOption | undefined;\n}\n\nexport interface IStyleAttributeInitializationOptions {\n  name: string;\n  type: AttributeType;\n  scale?: {\n    field: StyleAttributeField;\n    values: unknown[] | string;\n    defaultValues: unknown[] | string;\n    names: string[] | number[];\n    type: StyleScaleType;\n    callback?: (...args: any[]) => [];\n    scalers?: IAttributeScale[];\n  };\n  descriptor: IVertexAttributeDescriptor;\n}\n\nexport interface IFeatureRange {\n  startIndex: number;\n  endIndex: number;\n}\n\nexport interface IStyleAttribute extends IStyleAttributeInitializationOptions {\n  needRescale: boolean;\n  needRemapping: boolean;\n  needRegenerateVertices: boolean;\n  featureRange: IFeatureRange;\n  /**\n   * 保存渲染层 IAttribute 引用\n   */\n  vertexAttribute: IAttribute;\n  mapping?(...params: unknown[]): unknown[];\n  setProps(props: Partial<IStyleAttributeInitializationOptions>): void;\n  resetDescriptor(): void;\n}\n\nexport type Triangulation = (\n  feature: IEncodeFeature,\n  segmentNumber?: number,\n) => {\n  vertices: number[];\n  indices: number[];\n  size: number;\n  normals?: number[];\n};\n\nexport interface IStyleAttributeUpdateOptions {\n  featureRange: IFeatureRange;\n}\n\nexport interface IStyleAttributeService {\n  // registerDefaultStyleOptions(\n  //   layerName: string,\n  //   options: ILayerStyleOptions,\n  // ): void;\n  attributesAndIndices: {\n    attributes: {\n      [attributeName: string]: IAttribute;\n    };\n    elements: IElements;\n  };\n  registerStyleAttribute(\n    options: Partial<IStyleAttributeInitializationOptions>,\n  ): IStyleAttribute;\n  updateStyleAttribute(\n    attributeName: string,\n    attributeOptions: Partial<IStyleAttributeInitializationOptions>,\n    updateOptions: IStyleAttributeUpdateOptions,\n  ): void;\n  getLayerStyleAttributes(): IStyleAttribute[] | undefined;\n  getLayerStyleAttribute(attributeName: string): IStyleAttribute | undefined;\n  getLayerAttributeScale(attributeName: string): any;\n  createAttributesAndIndices(\n    encodedFeatures: IEncodeFeature[],\n    triangulation?: Triangulation,\n    segmentNumber?: number,\n  ): {\n    attributes: {\n      [attributeName: string]: IAttribute;\n    };\n    elements: IElements;\n  };\n  /**\n   * 根据 feature range 更新指定属性\n   */\n  updateAttributeByFeatureRange(\n    attributeName: string,\n    features: IEncodeFeature[],\n    startFeatureIdx?: number,\n    endFeatureIdx?: number,\n  ): void;\n  /**\n   * 清除当前管理的所有属性\n   */\n  clearAllAttributes(): void;\n}\n"},"lineCount":null}},"error":null,"hash":"04b8230a376ad873f8592e210260284f","cacheData":{"env":{}}}