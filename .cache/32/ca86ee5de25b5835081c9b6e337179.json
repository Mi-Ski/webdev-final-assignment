{"id":"../node_modules/@antv/l7-layers/es/plugins/LayerAnimateStylePlugin.js","dependencies":[{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\package.json","includedInParent":true,"mtime":1638980225037},{"name":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\package.json","includedInParent":true,"mtime":1638979319357},{"name":"@babel/runtime/helpers/initializerDefineProperty","loc":{"line":1,"column":39},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\initializerDefineProperty.js"},{"name":"@babel/runtime/helpers/classCallCheck","loc":{"line":2,"column":28},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\classCallCheck.js"},{"name":"@babel/runtime/helpers/createClass","loc":{"line":3,"column":25},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\createClass.js"},{"name":"@babel/runtime/helpers/defineProperty","loc":{"line":4,"column":28},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\defineProperty.js"},{"name":"@babel/runtime/helpers/applyDecoratedDescriptor","loc":{"line":5,"column":38},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\applyDecoratedDescriptor.js"},{"name":"@babel/runtime/helpers/initializerWarningHelper","loc":{"line":6,"column":38},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@babel\\runtime\\helpers\\initializerWarningHelper.js"},{"name":"@antv/l7-core","loc":{"line":14,"column":22},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-core\\es\\index.js"},{"name":"inversify","loc":{"line":15,"column":35},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\inversify\\lib\\inversify.js"},{"name":"reflect-metadata","loc":{"line":16,"column":7},"parent":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\@antv\\l7-layers\\es\\plugins\\LayerAnimateStylePlugin.js","resolved":"C:\\Users\\skiba\\Desktop\\webdev-final-assignment\\node_modules\\reflect-metadata\\Reflect.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _initializerDefineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerDefineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _applyDecoratedDescriptor2 = _interopRequireDefault(require(\"@babel/runtime/helpers/applyDecoratedDescriptor\"));\n\nvar _initializerWarningHelper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/initializerWarningHelper\"));\n\nvar _l7Core = require(\"@antv/l7-core\");\n\nvar _inversify = require(\"inversify\");\n\nrequire(\"reflect-metadata\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar LayerAnimateStylePlugin = (_dec = (0, _inversify.injectable)(), _dec2 = (0, _inversify.inject)(_l7Core.TYPES.ICameraService), _dec3 = (0, _inversify.inject)(_l7Core.TYPES.IRendererService), _dec(_class = (_class2 = function () {\n  function LayerAnimateStylePlugin() {\n    (0, _classCallCheck2.default)(this, LayerAnimateStylePlugin);\n    (0, _initializerDefineProperty2.default)(this, \"cameraService\", _descriptor, this);\n    (0, _initializerDefineProperty2.default)(this, \"rendererService\", _descriptor2, this);\n  }\n\n  (0, _createClass2.default)(LayerAnimateStylePlugin, [{\n    key: \"apply\",\n    value: function apply(layer) {\n      layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', function () {\n        layer.models.forEach(function (model) {\n          model.addUniforms(_objectSpread({}, layer.layerModel.getAnimateUniforms()));\n        });\n      });\n    }\n  }]);\n  return LayerAnimateStylePlugin;\n}(), (_descriptor = (0, _applyDecoratedDescriptor2.default)(_class2.prototype, \"cameraService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = (0, _applyDecoratedDescriptor2.default)(_class2.prototype, \"rendererService\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nexports.default = LayerAnimateStylePlugin;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":20,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":22,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":24,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"LayerAnimateStylePlugin","original":{"line":16,"column":21},"generated":{"line":68,"column":4}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"injectable","original":{"line":15,"column":1},"generated":{"line":68,"column":38}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"inject","original":{"line":17,"column":3},"generated":{"line":68,"column":76}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"TYPES","original":{"line":17,"column":10},"generated":{"line":68,"column":99}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"ICameraService","original":{"line":17,"column":16},"generated":{"line":68,"column":113}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"inject","original":{"line":17,"column":3},"generated":{"line":68,"column":127}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"inject","original":{"line":20,"column":3},"generated":{"line":68,"column":138}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"TYPES","original":{"line":20,"column":10},"generated":{"line":68,"column":161}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"IRendererService","original":{"line":20,"column":16},"generated":{"line":68,"column":175}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"inject","original":{"line":20,"column":3},"generated":{"line":68,"column":191}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":77,"column":11}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":77,"column":20}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":77,"column":25}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":23,"column":15},"generated":{"line":77,"column":26}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":77,"column":31}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":23,"column":30},"generated":{"line":77,"column":33}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":6}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":78,"column":11}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"hooks","original":{"line":27,"column":10},"generated":{"line":78,"column":12}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":17}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"beforeRender","original":{"line":27,"column":16},"generated":{"line":78,"column":18}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":30}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"tap","original":{"line":27,"column":29},"generated":{"line":78,"column":31}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":34}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":27,"column":33},"generated":{"line":78,"column":35}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":78,"column":60}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":27,"column":60},"generated":{"line":78,"column":62}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":27,"column":66},"generated":{"line":78,"column":74}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":29,"column":6},"generated":{"line":79,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":29,"column":6},"generated":{"line":79,"column":8}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":79,"column":13}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"models","original":{"line":29,"column":12},"generated":{"line":79,"column":14}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":29,"column":6},"generated":{"line":79,"column":20}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"forEach","original":{"line":29,"column":19},"generated":{"line":79,"column":21}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":29,"column":6},"generated":{"line":79,"column":28}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":79,"column":29}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"model","original":{"line":29,"column":28},"generated":{"line":79,"column":39}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":29,"column":27},"generated":{"line":79,"column":44}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":29,"column":46},"generated":{"line":79,"column":46}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"model","original":{"line":30,"column":8},"generated":{"line":80,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"model","original":{"line":30,"column":8},"generated":{"line":80,"column":10}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":80,"column":15}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"addUniforms","original":{"line":30,"column":14},"generated":{"line":80,"column":16}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"model","original":{"line":30,"column":8},"generated":{"line":80,"column":27}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":80,"column":28}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":80,"column":41}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":80,"column":42}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":80,"column":44}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":31,"column":13},"generated":{"line":80,"column":46}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":80,"column":51}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layerModel","original":{"line":31,"column":19},"generated":{"line":80,"column":52}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":31,"column":13},"generated":{"line":80,"column":62}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"getAnimateUniforms","original":{"line":31,"column":30},"generated":{"line":80,"column":63}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":31,"column":13},"generated":{"line":80,"column":81}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":80,"column":83}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"model","original":{"line":30,"column":8},"generated":{"line":80,"column":84}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":81,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":29,"column":6},"generated":{"line":81,"column":9}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":82,"column":0}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":"layer","original":{"line":27,"column":4},"generated":{"line":82,"column":7}},{"source":"../../src/plugins/LayerAnimateStylePlugin.ts","name":null,"original":{"line":35,"column":3},"generated":{"line":83,"column":0}}],"sources":{"../../src/plugins/LayerAnimateStylePlugin.ts":"import {\n  CameraUniform,\n  CoordinateUniform,\n  ICameraService,\n  ICoordinateSystemService,\n  ILayer,\n  ILayerPlugin,\n  IModel,\n  IRendererService,\n  TYPES,\n} from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\n\n@injectable()\nexport default class LayerAnimateStylePlugin implements ILayerPlugin {\n  @inject(TYPES.ICameraService)\n  private readonly cameraService: ICameraService;\n\n  @inject(TYPES.IRendererService)\n  private readonly rendererService: IRendererService;\n\n  public apply(layer: ILayer) {\n    // layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', () => {\n\n    // })\n    layer.hooks.beforeRender.tap('LayerAnimateStylePlugin', () => {\n      // 重新计算坐标系参数\n      layer.models.forEach((model: IModel) => {\n        model.addUniforms({\n          ...layer.layerModel.getAnimateUniforms(),\n        });\n      });\n    });\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"145c69e1d9f91f92261422524631e2b8","cacheData":{"env":{}}}